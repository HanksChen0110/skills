---
name: prompt-assistant
description: 提示词工程方法论与优化实践。当用户需要编写、优化、迭代提示词时使用。提供RTF结构化框架、16种提示词工程方式、动词优化策略、鲁棒性构建方法。适用于：编写新提示词、优化现有提示词、结构化提示词设计、提示词迭代改进、Few-shot示例设计、提示词质量评估。触发关键词：写提示词、优化提示词、提示词工程、结构化提示词、RTF提示词、提示词优化、Few-shot、思维链、提示词迭代。
---

# 提示词工程助手

## 核心思维框架

在开始编写提示词前，先问自己：

- **目标明确度**：用户想要AI完成什么？目标受众是谁？成功标准是什么？
- **复杂度评估**：这是简单任务（Zero-shot）还是复杂任务（需要Few-shot/Chain/Integrate）？
- **输出约束**：格式、风格、长度、禁止事项是什么？
- **知识依赖**：是否需要外部知识（RAG）？是否需要工具调用？

**决策树**：
```
简单任务 + 明确格式 → Zero-shot + RTF框架
复杂任务 + 需要示例 → Few-shot + RTF框架
需要推理 → Chain（CoT/ToT/Reflexion）
需要外部知识 → Integrate（RAG/工具）
需要探索多方案 → ToT（思维树）
```

## RTF结构化框架

**RTF（Role-Task-Format）**是构建提示词的核心框架：

- **Role（角色）**：明确AI扮演的角色，聚焦领域输出
- **Task（任务）**：清晰描述要完成的任务
- **Format（格式）**：指定输出格式、风格、长度等

### 快速模板

```markdown
# Role: <角色名称>
## Goals: [目标1] [目标2]
## Constraints: [约束1] [约束2]
## Skills: [技能1] [技能2]
## Workflow: [步骤1] [步骤2]
## OutputFormat: [格式要求]
## Examples: [示例1] [示例2]
## Initialization: [启动语]
```

**MANDATORY - 详细模板和案例**：编写RTF提示词前，必须读取 `references/rtf-framework.md` 获取完整模板、六大原则详解和实际案例。

## 六大核心原则

1. **用户第一**：用户的明确要求是最高指令，100%遵循
2. **RTF原则**：围绕角色、任务、格式三个核心要素
3. **正面表述**：明确告诉"做什么"而非"不要做什么"
   - ❌ "不要在回答中包含解释"
   - ✅ "请直接输出最终答案"
4. **Few-Shot质量**：示例必须高度逼真、格式统一、内容相关、标签均衡且正确
5. **奥卡姆剃刀**：用最少的Token实现最清晰的指令
6. **结构化呈现**：善用Markdown（标题、加粗、分隔符）增强可读性

## 提示词工程方式选择

### 直接提示（Prompt）
- **Zero-shot**：简单任务，只给指令
- **Few-shot**：需要固定格式/风格，追加1-N个高质量示例
- **Act提示**：需要特定视角（专家、导师等）
- **ReAct**：需要根据反馈调整行动
- **方向性刺激**：需要限制生成范围

### 链式提示（Chain）
- **CoT（思维链）**：复杂推理，显式要求逐步思考
- **自洽**：需要稳定性，多次生成后选取最一致答案
- **ToT（思维树）**：需要探索多个可能性，先发散再收敛
- **Reflexion**：需要自我改进，对自己的回答复盘、找错、修正
- **多模态CoT**：需要处理图片、表格等多模态信息

### 生成类提示（Generate）
- **生成知识提示**：难题，先让模型生成相关知识再回答
- **生成-阅读模式**：需要多角度分析，先生成关键词/提纲/候选方案

### 集成式提示（Integrate）
- **RAG**：需要最新/领域专有知识，从知识库检索
- **Agent**：复杂任务，需要自动拆解、调用工具
- **工具使用**：需要查数据库、调接口、读写文件
- **PAL**：需要严谨逻辑/计算，交给传统程序处理

**MANDATORY - 16种方式详解**：选择提示词工程方式时，必须读取 `references/aws-16-methods.md` 获取每种方式的适用场景、示例和最佳实践。

## 动词优化决策

### 任务类型 → 动词选择

| 任务类型 | 推荐动词类别 | 示例 |
|---------|-------------|------|
| 需要深度思考 | 分析类 | 分析、解析、评估、识别、提取 |
| 需要创建内容 | 生成类 | 生成、创建、构建、设计、编写 |
| 需要逻辑推理 | 推演类 | 推演、推导、预测、推断、计算 |
| 需要改进现有 | 优化类 | 优化、改进、提升、完善、调整 |
| 需要验证质量 | 验证类 | 验证、检验、测试、审核、确认 |

### 动词组合策略

- **递进式**：分析 → 推演 → 生成 → 优化（系统性解决问题）
- **并列式**：同时执行多个相关动词（多角度处理）
- **条件式**：基于条件触发特定动词（动态调整）
- **循环式**：迭代使用动词组合（持续优化）

**NEVER使用模糊动词**："做、处理、搞"等 → 使用具体动词："分析数据、改进用户体验"

**MANDATORY - 动词优化指南**：需要优化提示词中的动词时，必须读取 `references/verb-optimization.md` 获取动词分类体系、组合策略和使用原则。

## 鲁棒性构建

### 通用原则

1. **RTF结构化**：包括风格、语气、长度等
2. **信息全面清晰**：避免遗漏导致模型联想补全产生幻觉
3. **正面表述**：指导"做什么"比"不做什么"更有效
4. **善用Markdown**：标题、加粗、分隔符增强可读性
5. **Few-shot增强**：通过高质量示例提升模型表现

### 进阶技术选择

- **上下文工程**：需要减少幻觉 → 静态（写进提示词）或动态（RAG/联网搜索）
- **ToT（思维树）**：需要探索多个可能性 → 先发散再收敛
- **提示链**：任务过于复杂 → 拆分为多个顺序执行的子提示
- **自我提问**：问题模糊 → 先提出子问题并逐一回答
- **递归式自我改进（RSI）**：需要持续优化 → 让模型自我批评和改进

**MANDATORY - 鲁棒性方法论**：需要构建鲁棒性提示词时，必须读取 `references/robustness-methodology.md` 获取通用原则、静态示例要求和进阶技术详解。

## 工作流程

### 步骤1：需求分析与澄清

**思考框架**：
- 用户想要AI完成什么任务？
- 目标受众是谁？
- 输出格式要求是什么？
- 有哪些约束条件？
- 这是简单任务还是复杂任务？

**输出**：明确的任务需求描述

### 步骤2：选择提示词工程方式

**决策**：
- 简单任务 → Zero-shot + RTF框架
- 需要示例 → Few-shot + RTF框架
- 需要推理 → Chain方式（CoT/ToT/Reflexion）
- 需要外部知识 → Integrate方式（RAG/工具）
- 需要探索多方案 → ToT

**MANDATORY**：选择方式后，读取 `references/aws-16-methods.md` 获取该方式的详细指导。

### 步骤3：RTF框架设计

**判断问题**：
- 需要什么角色？
- 核心任务是什么？
- 输出格式要求？

**MANDATORY**：设计RTF框架前，读取 `references/rtf-framework.md` 获取完整模板和六大原则详解。

**输出**：RTF结构化提示词框架

### 步骤4：动词优化

**判断问题**：
- 任务属于哪个类型（分析/生成/推演/优化/验证）？
- 需要哪些动词组合？
- 动词是否精确、可执行？

**MANDATORY**：优化动词时，读取 `references/verb-optimization.md` 获取动词分类和组合策略。

**输出**：优化后的动词选择

### 步骤5：Few-Shot增强（如需要）

**判断问题**：
- 任务是否复杂或需要特定风格？
- 需要哪些示例？
- 示例是否高质量（逼真、统一、相关、均衡、正确）？

**输出**：添加Examples部分

### 步骤6：迭代优化

**优化策略**：
- 多余内容 → 在Constraints中增加限制
- 缺失内容 → 在Skills和Workflow中增加细节
- **必须使用固定测试用例**对比迭代前后效果

**关键原则**：一次只修改一个部分，不要同时修改多个部分

### 步骤7：进阶技术应用（如需要）

**判断问题**：
- 是否需要上下文工程（静态/动态）？
- 是否需要思维树/提示链/自我提问？
- 是否需要集成外部资源（RAG/工具）？

**MANDATORY**：应用进阶技术前，读取 `references/robustness-methodology.md` 获取技术详解。

## 反模式（NEVER Do）

### ❌ 反模式1：不结构化
**错误**：随意写提示词，没有结构  
**正确**：使用RTF框架，组织信息  
**原因**：无结构的提示词容易产生幻觉，输出不稳定

### ❌ 反模式2：负面表述
**错误**："不要包含解释"  
**正确**："直接输出最终答案"  
**原因**：负面表述容易被忽略，正面指令更明确有效

### ❌ 反模式3：模糊动词
**错误**："做处理、优化内容"  
**正确**："分析数据、改进用户体验"  
**原因**：模糊动词导致AI理解偏差，执行结果不可预期

### ❌ 反模式4：一次修改过多
**错误**：同时修改多个部分  
**正确**：Step by step，一次修改一个部分  
**原因**：无法确定哪些修改有效，哪些无效

### ❌ 反模式5：不使用固定测试用例
**错误**：每次测试用例都不同  
**正确**：使用固定的测试用例，便于对比  
**原因**：AI输出是概率结果，不同测试用例无法对比迭代效果

### ❌ 反模式6：Few-Shot质量差
**错误**：示例有错别字、格式不统一、标签错误  
**正确**：确保示例高度逼真、格式统一、标签正确  
**原因**：低质量示例会误导模型，产生错误输出模式

### ❌ 反模式7：过度依赖模板
**错误**：拘泥于某个模板，不敢调整  
**正确**：根据需求灵活调整模块，不拘泥于模板  
**原因**：模板是起点，不是终点，需要根据实际需求优化

### ❌ 反模式8：忽略上下文工程
**错误**：不明确任务背景、目标受众、约束条件  
**正确**：明确任务背景，减少幻觉  
**原因**：缺少上下文会导致模型联想补全，产生幻觉

## 何时读取参考资料

**MANDATORY触发**（必须读取）：
- 编写RTF提示词前 → 读取 `references/rtf-framework.md`
- 选择提示词工程方式时 → 读取 `references/aws-16-methods.md`
- 优化提示词中的动词时 → 读取 `references/verb-optimization.md`
- 构建鲁棒性提示词时 → 读取 `references/robustness-methodology.md`

**可选触发**（按需读取）：
- 需要完整方法论文档 → 读取 `references/methodology.md`

**Do NOT Load**：如果只是简单优化现有提示词，不需要读取所有参考资料，只读取相关部分。

## 使用示例

**用户**："帮我写一个产品经理角色的提示词"

**响应流程**：
1. **需求分析**：了解产品经理的具体职责和场景
2. **方式选择**：选择Few-shot + RTF框架（需要特定视角和示例）
3. **RTF框架设计**：定义Role、Goals、Constraints、Skills、Workflow
4. **动词优化**：选择"分析、评估、生成、优化"等精确动词
5. **Few-Shot增强**：添加产品经理回答问题的示例
6. **迭代优化**：根据输出调整Constraints和Skills，使用固定测试用例验证
